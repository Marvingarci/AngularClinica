<mat-toolbar class="toolbar">
    <span>Clinica UNAH-TEC Danli</span>

    <button mat-icon-button [matMenuTriggerFor]="menu" style=" outline:none;display:block;">
        <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menu="matMenu">

        <button mat-menu-item (click)="cerrarsesion()" style=" outline:none;display:block;">
            <mat-icon>loop</mat-icon>
            <span>Cambiar contraseña</span>
        </button>

        <button mat-menu-item (click)="cambiarcontra()" style=" outline:none;display:block;">
            <mat-icon>power_settings_new</mat-icon>
            <span>Cerrar sesión</span>
        </button>

    </mat-menu>



</mat-toolbar>


<div class="container">

    <form [formGroup]="formulario_datos_generales">
        <mat-card style="margin-top:0px;" [class.mat-elevation-z5]="true">

            <div class="row">
                <div
                    style="width: 216.5px;height: 216.5px;padding-left:50.75px;padding-right: 50.75px;padding-top: 38.25px;padding-bottom: 38.25px;margin-left: 20px;">
                    <img *ngIf="noImg==true" class="sinImg" />
                    <img *ngIf="noImg == false" class="img" src={{paciente.imagen}} />
                </div>

                <div class="col" style="padding-top: 20px;">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Nombre" formControlName="nombre_completo" [readonly]="readonly">

                        <mat-error *ngIf="nombre_completo.hasError('required')">campo requerido!</mat-error>
                        <mat-error *ngIf="nombre_completo.hasError('pattern')">ingrese un nombre valido!</mat-error>

                    </mat-form-field>
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Identidad" formControlName="numero_identidad"
                            [readonly]="readonly">
                        <mat-error *ngIf="numero_identidad.hasError('required')">campo requerido!</mat-error>
                        <mat-error *ngIf="numero_identidad.hasError('pattern')">ingrese un numero de indentidad valido!
                        </mat-error>

                    </mat-form-field>
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Numero de cuenta" formControlName="numero_cuenta"
                            [readonly]="readonly">
                        <mat-error *ngIf="numero_cuenta.hasError('required')">campo requerido!</mat-error>
                        <mat-error *ngIf="numero_cuenta.hasError('pattern')">ingrese un numero de cuenta valido!
                        </mat-error>

                    </mat-form-field>
                </div>
                <div class="col" style="padding-top: 20px;">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Numero de telefono" formControlName="numero_telefono"
                            [readonly]="readonly">
                        <mat-error *ngIf="numero_telefono.hasError('required')">campo requerido!</mat-error>
                        <mat-error *ngIf="numero_telefono.hasError('pattern')">introduzca un numero de telefono valido!
                        </mat-error>

                    </mat-form-field>
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Carrera" formControlName="carrera" [readonly]="readonly">
                        <mat-error *ngIf="carrera.hasError('required')">campo requerido!</mat-error>
                        <mat-error *ngIf="carrera.hasError('pattern')">ingrese datos validos!</mat-error>

                    </mat-form-field>
                    <mat-form-field class="example-full-width" *ngIf="readonly">
                        <input matInput placeholder="Sexo" formControlName="sexo" [readonly]="readonly">
                        <!-- <button mat-button matSuffix mat-stroked-button aria-label="create">
                                <mat-icon>create</mat-icon>
                            </button> -->
                    </mat-form-field>
                    <mat-form-field class="example-full-width" *ngIf="!readonly">
                        <mat-label>Sexo</mat-label>
                        <mat-select formControlName="sexo">
                            <mat-option value="Hombre">Hombre</mat-option>
                            <mat-option value="Mujer">Mujer</mat-option>

                        </mat-select>
                        <!-- <mat-error *ngIf="sexo.hasError('required')">campo requerido!</mat-error> -->

                    </mat-form-field>
                </div>

            </div>

            <div class="row">
                <div class="col">
                    <div style="text-align: right;">
                        <button mat-raised-button class="botonperron" mat-raised-button
                            class="btn btn-outline-primary float-right botonperron" style="margin-top: 10px;"
                            (click)="editar(); actualizar()" disabled={{formulario_datos_generales.invalid}}>
                            {{!readonly ? 'Guardar' : 'Editar'}}
                        </button>
                    </div>
                </div>
            </div>
            <!-- <div style="text-align: right;">
                            <button mat-raised-button
                                class="btn btn-outline-primary float-right"
                                style="margin-top: 10px;"
                                (click)="readonly = !readonly; actualizar()"
                                >
                                {{!readonly ? 'Guardar' : 'Editar'}}
                            </button>
                        </div> -->







        </mat-card>
    </form>

    <br />


    <mat-card style="margin-top: 15px;" [class.mat-elevation-z5]="true">
        
        <mat-tab-group dynamicHeight animationDuration="200ms" color="accent" backgroundColor="primary">
            <mat-tab label="Citas">
              <div class="example-large-box mat-elevation-z4">
                <p *ngIf="dataSourceTablaDatoPaciente == null" style="margin-top: 5px;">  Este paciente aun no tiene una cita  </p>
                <table mat-table [dataSource]="dataSourceTablaDatoPaciente" class="tabla" *ngIf="dataSourceTablaDatoPaciente != null">
                    <ng-container matColumnDef="siguiente_cita">
                        <th mat-header-cell *matHeaderCellDef> </th>
                        <td mat-cell *matCellDef="let element"> {{element.siguiente_cita}} </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="columnaTablaDatoPaciente"></tr>
                    <tr mat-row *matRowDef="let row; columns: columnaTablaDatoPaciente;"></tr>
                </table>
              </div>
            </mat-tab>

            <mat-tab label="Tratamientos">
                <div class="example-large-box mat-elevation-z4">
                    <p *ngIf="dataSourceTablaDatoPaciente1 == null" style="margin-top: 5px;">  Este paciente aun no cuenta con un medicamento  </p>
                  <table mat-table [dataSource]="dataSourceTablaDatoPaciente1" class="tabla" *ngIf="dataSourceTablaDatoPaciente1 != null">
                      <ng-container matColumnDef="nombre">
                          <th mat-header-cell *matHeaderCellDef> </th>
                          <td mat-cell *matCellDef="let element"> {{element.nombre}} </td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="columnaTablaDatoPaciente1"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnaTablaDatoPaciente1;"></tr>
                  </table>
                </div>
              </mat-tab>
              <mat-tab label="Indicaciones">
                <div class="example-large-box mat-elevation-z4">
                    <p *ngIf="dataSourceTablaDatoPaciente2 == null" style="margin-top: 5px;">  Este paciente no tiene indicaciones  </p>
                  <table mat-table [dataSource]="dataSourceTablaDatoPaciente2" class="tabla" *ngIf="dataSourceTablaDatoPaciente2 != null">
                      <ng-container matColumnDef="indicaciones">
                          <th mat-header-cell *matHeaderCellDef> </th>
                          <td mat-cell *matCellDef="let element"> {{element.indicaciones}} </td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="columnaTablaDatoPaciente2"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnaTablaDatoPaciente2;"></tr>
                  </table>
                </div>
              </mat-tab>
              <mat-tab label="Observaciones">
                <div class="example-large-box mat-elevation-z4">
                    <p *ngIf="dataSourceTablaDatoPaciente3 == null" style="margin-top: 5px;">  Este paciente no tiene observaciones  </p>
                  <table mat-table [dataSource]="dataSourceTablaDatoPaciente3" class="tabla" *ngIf="dataSourceTablaDatoPaciente3 != null">
                      <ng-container matColumnDef="observaciones">
                          <th mat-header-cell *matHeaderCellDef> </th>
                          <td mat-cell *matCellDef="let element"> {{element.observaciones}} </td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="columnaTablaDatoPaciente3"></tr>
                      <tr mat-row *matRowDef="let row; columns: columnaTablaDatoPaciente3;"></tr>
                  </table>
                </div>
              </mat-tab>
          </mat-tab-group>

    </mat-card>


</div>